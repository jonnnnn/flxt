<link rel="stylesheet" href="../../css/layui.css" id="layui">
<script src="../../templz/layui.all.js"></script>
<script src="../../js/jquery-1.8.3.min.js"></script>
<!-- 模板 -->
<div class="layui-fluid">
  <div class="layui-row">
    <div class="layui-col-xs12">
      <div class="layui-card">
        <div class="layui-card-header">
           <!--<div style="float: left;"> <button type="button" id="look" class="layui-btn layui-btn-primary">查看</button></div>-->
          <!-- <div style="float: right;"> <button type="button" id="edit" class="layui-btn layui-btn-primary">编辑</button></div>-->
        </div>
        <div class="layui-card-body">
            <form class="layui-form"   onsubmit="return false">
                <div class="layui-form-item" >
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 85px" >单据编号</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="billid"  id="ylrbillidid"  readonly  lay-verify="required" autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item" >
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 85px" >政策开始日期</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="begindate" id="begindateid"   lay-verify="required" autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline" >
                        <label class="layui-form-label" style="width: 85px" >政策截止日期</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="enddate" id="enddateid"  autocomplete="off"   class="layui-input"></span>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item" >
                    <div class="layui-inline" >
                        <label class="layui-form-label">供应商编码</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="supno" id="supnoid" readonly  autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline" >
                        <label class="layui-form-label">供应商名称</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="supname" id="supnameid" readonly autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item" >
                    <div class="layui-inline" >
                        <label class="layui-form-label" >商品编码</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="prodno" id="prodnoid" readonly autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline" >
                        <label class="layui-form-label" >商品名称</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="prodname" id="prodnameid"  readonly  autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline" >
                        <label class="layui-form-label">规格</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="prodspecification" id="prodspecificationid" readonly  autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline" >
                        <label class="layui-form-label">包装单位</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="packageunit" id="packageunitid" readonly autocomplete="off" lay-verify="required" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline" >
                        <label class="layui-form-label">采购员</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="purchaser" id="purchaserid" readonly  autocomplete="off" lay-verify="required" class="layui-input"></span>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item" >
                    <div id="custsid">
                    <div class="layui-inline">
                        <label class="layui-form-label" >客户编码</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="custno" id="custnoid" readonly autocomplete="off"  class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label" >客户名称</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="custname"  id="custnameid" readonly autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label" >所属大区</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="ownerareatext" id="ownerareaid" readonly  autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    </div>
                    <div id="custtypesId">
                    <div class="layui-inline"  >
                        <label class="layui-form-label" >客户类型ID</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="custtype" id="custtyid" readonly  autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline" >
                        <label class="layui-form-label" >客户类型</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="custtypename" id="custtynameid" readonly  autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">销售价</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="price" id="priceid"  autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label">购进价</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="getprice" id="getpriceid"   autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">返利单价</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="flprice" id="flpriceid"   autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">兑付时间</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="dftime" id="dftimeid"   autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <!--<div class="layui-form-item">
                        <label class="layui-form-label">兑付时间</label>
                        <div class="layui-input-block" style="width: 500px">
                            <select name="dftime" id="dftimeid" lay-verify="required">
                                <option value=""></option>
                                <option value="月付">月付</option>
                                <option value="季度付">季度付</option>
                                <option value="半年付">半年付</option>
                                <option value="60天付">60天付</option>
                            </select>
                        </div>
                    </div>-->
                    <div class="layui-form-item">
                        <label class="layui-form-label">政策类型</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="fltype" id="fltypeid"   autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">兑付方式</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="dftype" id="dftypeid"   autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 85px" >供应商联系人</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="contactsman" id="contactsmanid"  autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 85px" >联系人电话</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="contactsphone" id="contactsphoneid"   autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label">备注</label>
                        <div class="layui-input-inline">
                            <span><input type="text" name="note"  id="noteid"  autocomplete="off" class="layui-input"></span>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label">返利政策(详细)</label>
                    <div class="layui-input-block">
                        <textarea name="flmark" placeholder="请输入内容" id="flmarkid" class="layui-textarea"></textarea>
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" lay-submit="" lay-filter="demo1_hash"  >立即提交</button>
                    </div>
                </div>
            </form>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- 脚本 -->
<script>

    function child(billid) {
        layui.config({
            version: '1522709297490' //为了更新 js 缓存，可忽略
        });
        layui.use(['form','table','jquery'], function() {
            var form = layui.form,
                table = layui.table,
                $ = layui.jquery;
            form.render();
            $.post('../../getYlr', {billid: billid,page:1,limit:10}, function (res) {
                var arr1= res.data;
                $("#begindateid").val(arr1[0].begindate);
                $("#enddateid").val(arr1[0].enddate);
                $("#supnoid").val(arr1[0].supno);
                $("#supnameid").val(arr1[0].supname);
                $("#prodnoid").val(arr1[0].prodno);
                $("#prodnameid").val(arr1[0].prodname);
                $("#prodspecificationid").val(arr1[0].prodspecification);
                $("#packageunitid").val(arr1[0].packageunit);
                $("#custnoid").val(arr1[0].custno);
                $("#custnameid").val(arr1[0].custname);
                $("#custtyid").val(arr1[0].custtype);
                $("#custtynameid").val(arr1[0].custtypename);
                $("#priceid").val(arr1[0].price);
                $("#getpriceid").val(arr1[0].getprice);
                $("#flmarkid").val(arr1[0].flmark);
                $("#fltypeid").val(arr1[0].fltype);
                $("#flpriceid").val(arr1[0].flprice);
                $("#dftimeid").val(arr1[0].dftime);
                $("#dftypeid").val(arr1[0].dftype);
                $("#contactsmanid").val(arr1[0].contactsman);
                $("#contactsphoneid").val(arr1[0].contactsphone);
                $("#noteid").val(arr1[0].note);
                $("#ylrbillidid").val(arr1[0].billid);
                $("#purchaserid").val(arr1[0].purchaser);
                $("#ownerareaid").val(arr1[0].ownerareatext);

                /*if($(arr1[0].custtype)==null){
                    console.log(arr1[0].custtype);
                    $("#custtypesId").hide();
                    $("#custsid").show();
                }else {
                    console.log(arr1[0].custtype);
                    $("#custtypesId").show();
                    $("#custsid").hide();
                }*/
            }, 'json');
        });
    }

    layui.use(['form','table'], function() {
      var form = layui.form,
          layer = layui.layer,
        $ = layui.jquery;
      form.render();

      //监听提交
      form.on('submit(demo1_hash)', function(data) {
          $.post('../../updYlr', data.field, function(res) {
              layer.msg(res.success ?  '提交失败.': res.msg);
          }, 'json');

          var index = parent.layer.getFrameIndex(window.name);
          setTimeout(function () {
              parent.layer.close(index);
          },500);
        return false;
      });
  });
</script>



