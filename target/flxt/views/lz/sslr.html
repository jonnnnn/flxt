<script src="js/jquery-1.8.3.min.js"></script>
<div class="layui-fluid">
  <div class="layui-row">
    <div class="layui-col-xs12">
      <div class="layui-card">
        <div class="layui-card-body">
          <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend>实收录入</legend>
          </fieldset>

              <form class="layui-form"  id="formid" onsubmit="return false">
                  <div class="layui-form-item" >
                      <div class="layui-inline">
                          <label class="layui-form-label" style="width: 85px" >单据编号</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="billid"  readonly  lay-verify="required" autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                  </div>
                  <div class="layui-form-item" >
                      <div class="layui-inline">
                          <label class="layui-form-label" style="width: 85px" >政策开始日期</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="begindate" id="begindateid" readonly  lay-verify="required" autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline" >
                          <label class="layui-form-label" style="width: 85px" >政策截止日期</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="enddate" id="enddateid" lay-verify="required" readonly autocomplete="off"   class="layui-input"></span>
                          </div>
                      </div>
                  </div>
                  <div class="layui-form-item" >
                      <div class="layui-inline" >
                          <label class="layui-form-label">供应商编码</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="supno" readonly  lay-verify="required" autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline" >
                          <label class="layui-form-label">供应商名称</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="supname" readonly  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                  </div>
                  <div class="layui-form-item" >
                      <div class="layui-inline" >
                          <label class="layui-form-label" >商品编码</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="prodno" readonly lay-verify="required" autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline" >
                          <label class="layui-form-label" >商品名称</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="prodname" readonly  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline" >
                          <label class="layui-form-label">规格</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="prodspecification" readonly  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline" >
                          <label class="layui-form-label">包装单位</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="packageunit" readonly  autocomplete="off" lay-verify="required" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline" >
                          <label class="layui-form-label">采购员</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="purchaser" readonly autocomplete="off" lay-verify="required" class="layui-input"></span>
                          </div>
                      </div>
                  </div>
                  <div class="layui-form-item" >
                      <div id="custid">
                      <div class="layui-inline">
                          <label class="layui-form-label" >客户编码</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="custno"  readonly autocomplete="off"  class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline">
                          <label class="layui-form-label" >客户名称</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="custname" readonly  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline">
                          <label class="layui-form-label" >所属大区</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="ownerareatext" readonly  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      </div>
                      <div class="layui-inline" id="custtyid" style="display: none">
                          <label class="layui-form-label" >客户类型</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="custtypename" readonly  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                  </div>
                  <div class="layui-form-item">
                      <div class="layui-inline">
                          <label class="layui-form-label">销售价</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="price" readonly lay-verify="required"  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline">
                          <label class="layui-form-label">购进价</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="getprice" readonly lay-verify="required"  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>

                      <div class="layui-inline">
                          <label class="layui-form-label">返利单价</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="flprice" readonly lay-verify="required"  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline">
                          <label class="layui-form-label">兑付时间</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="dftime" id="dftimeid" lay-verify="required" readonly  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-form-item">
                          <label class="layui-form-label">政策类型</label>
                          <div class="layui-input-block" style="width: 500px">
                              <div class="layui-input-inline">
                                  <span><input type="text" name="fltype" readonly lay-verify="required" autocomplete="off" class="layui-input"></span>
                              </div>
                          </div>
                      </div>

                      <div class="layui-form-item">
                          <label class="layui-form-label">兑付方式</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="dftype" readonly lay-verify="required" autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline">
                          <label class="layui-form-label" style="width: 85px" >供应商联系人</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="contactsman" readonly  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline">
                          <label class="layui-form-label" style="width: 85px" >供联系人电话</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="contactsphone" readonly lay-verify="required" autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>
                      <div class="layui-inline">
                          <label class="layui-form-label">确认备注</label>
                          <div class="layui-input-inline">
                              <span><input type="text" name="note"  readonly  autocomplete="off" class="layui-input"></span>
                          </div>
                      </div>

                  </div>
                  <div class="layui-form-item">
                      <label class="layui-form-label">已实收金额</label>
                      <div class="layui-input-inline">
                          <span><input type="text" name="ssje" readonly lay-verify="required"  autocomplete="off" class="layui-input"></span>
                      </div>
                      <label class="layui-form-label" style="color: #ff2013;width: 85px">本次实收金额</label>
                      <div class="layui-input-inline">
                          <input type="text" name="bcss"  autocomplete="off" lay-verify="required" class="layui-input">
                      </div>

                          <label class="layui-form-label">实收备注</label>
                          <div class="layui-input-inline">
                              <span> <input type="text" name="note2"   autocomplete="off" class="layui-input"></span>
                          </div>

                  </div>
                  <div class="layui-form-item layui-form-text">
                      <label class="layui-form-label">返利政策(详细)</label>
                      <div class="layui-input-block">
                          <span><textarea name="flmark" readonly placeholder="请输入内容" class="layui-textarea"></textarea></span>
                      </div>
                  </div>

                  <div class="layui-form-item">
                      <div class="layui-input-block">
                          <button class="layui-btn" lay-submit="" lay-filter="demo1_hash"  >立即提交</button>
                      </div>
                  </div>
              </form>

        </div>
      </div>
    </div>
  </div>
</div>
<script>
  layui.use(['form', 'layedit', 'laydate','jquery'], function() {
    var
      $ = layui.jquery,
      form = layui.form,
      layer = layui.layer;
    form.render();

      $("#formid").dblclick(function () {
          layer.open({
              type: 2,
              title: '选择单据',
              shadeClose: true,
              shade: 0.8,
              area: ['60%', '90%'],//宽 高
              content: 'views/lz/selectqrlu.html',
              success:function (layero,index ) {

              }
          });
      });

    //监听提交
    form.on('submit(demo1_hash)', function(data) {


      layer.confirm("确认提交?",function () {
          $.ajax({
              url: 'sslr',
              type:'post',
              dataType:"json",
              data: data.field,
              success:function (res) {
                  layer.msg(res.msg, {time:3000});
                  $("#formid")[0].reset();
                  layui.form.render();
              },error:function (res) {
                  layer.msg('网络错误!');
              }
          });
      });
      });



  });

  function getylr(data) {
      $("#formid").each(function () {
          $(this).find("span").each(function (n) {
              $(this).children("input").val(data[n]);
              $(this).children("textarea").val(data[n]);
          }) ;
      });
      if(data[13]==null){
          $("#custtyid").hide();
          $("#custid").show();
      }else {
          $("#custtyid").show();
          $("#custid").hide();
      }
  }
</script>

